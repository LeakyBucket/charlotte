<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Charlotte : Elixir Web Framework">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Charlotte</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/LeakyBucket/charlotte">View on GitHub</a>

          <h1 id="project_title">Charlotte</h1>
          <h2 id="project_tagline">a small Elixir web-framework</h2>
        </header>
    </div>

    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <div class="highlight"><pre><code class="language-elixir" data-lang="elixir">  <span class="kd">defmodule</span> <span class="nc">Users</span> <span class="k">do</span>  
    <span class="kn">use</span> <span class="nc">Charlotte.Handlers.HTTP</span>  

    <span class="kd">def</span> <span class="n">routes</span> <span class="k">do</span>
      <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="ss">:index</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;/user/:id&quot;</span><span class="p">,</span> <span class="ss">:show</span><span class="p">}</span>
      <span class="p">]</span>
    <span class="k">end</span>

    <span class="kd">def</span> <span class="n">users</span><span class="p">(</span><span class="n">_verb</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span> <span class="k">do</span>
      <span class="n">users</span> <span class="p">=</span> <span class="nc">UserFinder</span><span class="p">.</span><span class="n">all</span>

      <span class="n">render</span> <span class="p">[</span><span class="ss">users</span><span class="p">:</span> <span class="n">users</span><span class="p">],</span> <span class="n">conn</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre></div>
<p><br /></p>

<h2>Charlotte is</h2>

<p>A web-framework written entirely in Elixir.  </p>

<p>Charlotte is similar to <a href="http://www.sinatrarb.com/">Sinatra</a> in
that it aims to be small and stay out of your way.  </p>

<p>Charlotte is similar to <a href="http://rubyonrails.org/">Rails</a> in that
it tries to take care of tedium for you.  </p>

<h2>Charlotte is not</h2>

<p>Charlotte is not like a majority of other frameworks. It aims
to be as modular as possible.  In the future this will include
handling multiple protocols in the same application, everything
from Websocket and SPDY to HTTP 2.0.  </p>

<p>Charlotte is not like <a href="http://rubyonrails.org/">Rails</a> in that
it does not come with a persistence library.  </p>

<p>Charlotte is not yet mature enough for production.  It is a
definite work in progress.  </p>

<h2>Quick and Dirty</h2>

<p>In order to get started with Charlotte you need to add it as a
dependency.</p>
<div class="highlight"><pre><code class="language-elixir" data-lang="elixir">  <span class="p">{</span><span class="ss">:charlotte</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.3.0&#39;</span><span class="p">}</span>
</code></pre></div>
<p>After installing Charlotte you can start using it in your
application.  </p>

<p>In order for Charlotte to listen and handle requests it needs
to be started. This would usually be done in the <code>start</code> function
for your application. Charlotte doesn&#39;t require any special
arguments to start however it does expect a bit of <a href="https://github.com/LeakyBucket/charlotte#configuration">configuration</a>.
This can either be set in the environment or it can be passed to
<code>Charlotte.start/2</code>.  </p>

<p>The following values need to be set before starting Charlotte or
given as an argument to <code>Charlotte.start/2</code>.  </p>

<ul>
<li>CHARLOTTE_CONTROLLER_PATH</li>
<li>CHARLOTTE_VIEW_PATH</li>
<li>CHARLOTTE_ASSET_PATH</li>
<li>CHARLOTTE_HOST</li>
<li>CHARLOTTE_PROTOCOL</li>
<li>CHARLOTTE_ACCEPTORS</li>
<li>CHARLOTTE_COMPRESS</li>
<li>CHARLOTTE_PORT</li>
</ul>

<h2>Controllers</h2>

<p>Each controller in Charlotte is a single Elixir module. The
controller consists of a <code>Charlotte.Handler</code>, route definitions
and functions representing actions.  </p>

<p>The handler defines the callbacks necessary for Cowboy to use
your module as a protocol handler.  Cowboy supports several
protocols and eventually Charlotte will too but for now we only
support <code>HTTP 1.1</code>.  </p>
<div class="highlight"><pre><code class="language-elixir" data-lang="elixir">  <span class="kn">use</span> <span class="nc">Charlotte.Handlers.HTTP</span>
</code></pre></div>
<p>Each controller defines the routes it is responsible for directly
in the controller module. Routes are defined in the form of a
list of <code>{path, action}</code> tuples where the <code>path</code> is given as a
string and the <code>action</code> is an atom.</p>
<div class="highlight"><pre><code class="language-elixir" data-lang="elixir">  <span class="kd">def</span> <span class="n">routes</span> <span class="k">do</span>
    <span class="p">[</span>
      <span class="p">{</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="ss">:root</span><span class="p">},</span>
      <span class="p">{</span><span class="s2">&quot;/one&quot;</span><span class="p">,</span> <span class="ss">:level_one</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="k">end</span>
</code></pre></div>
<p>The handler will handle looking up the action based on the path
and calling the proper function in your controller module.  </p>

<p>Every action accepts three arguments: the HTTP verb, request
parameters and a connection record.</p>
<div class="highlight"><pre><code class="language-elixir" data-lang="elixir">  <span class="kd">def</span> <span class="n">level_one</span><span class="p">(</span><span class="n">_verb</span><span class="p">,</span> <span class="n">_params</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">render</span> <span class="p">[</span><span class="ss">level</span><span class="p">:</span> <span class="s2">&quot;one&quot;</span><span class="p">],</span> <span class="n">conn</span>
  <span class="k">end</span>
</code></pre></div>
<p>In the above example the render function causes Charlotte to
render the <code>level_one.eex</code> file located in the <code>CHARLOTTE_VIEW_PATH</code>
for the controller module (<code>$CHARLOTTE_VIEW_PATH/&lt;CONTROLLER_NAME&gt;/level_one.eex</code>).  </p>

<h2>Views</h2>

<p>Currently Charlotte only supports <code>EEx</code> for it&#39;s templating,
however there are plans to add <code>Haml</code> in the near future.  </p>

<p>All views live in the directories in the <code>CHARLOTTE_VIEW_PATH</code>
location.  Views are expected to be <a href="http://elixir-lang.org/docs/stable/eex/">EEx</a>
templates and should be named the same as the controller action
that renders them.</p>
<div class="highlight"><pre><code class="language-erb" data-lang="erb"><span class="x">  &lt;p&gt;This is the level_one view&lt;/p&gt;</span>

<span class="x">  &lt;p&gt;The level is </span><span class="cp">&lt;%=</span> <span class="vi">@level</span> <span class="cp">%&gt;</span><span class="x">&lt;/p&gt;</span>
</code></pre></div>
<h2>Assets</h2>

<p>Last but not least, assets. Assets can be served by Charlotte
just like anything else. Assets are mapped to <code>/assets/[...]</code>,
that is a catch-all route that will match any path starting
with <code>/assets/</code>.  Cowboy should be smart enough to determine
the file type and respond appropriately.</p>

      </section>
    </div>

    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Charlotte maintained by <a href="https://github.com/LeakyBucket">LeakyBucket</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
  </body>
</html>
